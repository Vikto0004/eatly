{"version":3,"file":"commonHelpers2.js","sources":["../src/js/render-markup.js","../src/js/latest-articles.js"],"sourcesContent":["export const latestArticlesItems = dataArray => {\n  const markup = dataArray.map(({ author, images, publishedAt, title }) => {\n    return `<li class=\"latest-articles-item\">\n        <picture>\n          <source\n            srcset=\"\n              ${images.desktop['1x']} 1x,\n              ${images.desktop['2x']} 2x\n            \"\n            media=\"(min-width: 1440px)\"\n          />\n          <source\n            srcset=\"\n              ${images.tablet['1x']} 1x,\n              ${images.tablet['2x']} 2x\n            \"\n            media=\"(min-width: 1024px)\"\n          />\n          <source\n            srcset=\"\n              ${images.mobil['1x']} 1x,\n              ${images.mobil['2x']} 2x\n            \"\n            media=\"(max-width: 1023px)\"\n          />\n          <img\n            class=\"latest-articles-img\"\n            src=\"${images.desktop['1x']}\" \n            alt=\"latest articles img\"\n          />\n        </picture>\n        <h3 class=\"latest-articles-questions\">${title}</h3>\n        <div class=\"latest-articles-wrap\">\n          <img\n            srcset=\"\n              ${images.avatar['1x']} 1x,\n              ${images.avatar['2x']} 2x\n            \"\n            alt=\"user\"\n            width=\"30px\"\n            height=\"30px\"\n          />\n          <div>\n            <p class=\"latest-articles-written\">Written By</p>\n            <p class=\"latest-articles-autor\">${author}</p>\n          </div>\n          <p class=\"latest-articles-date\">${publishedAt}</p>\n        </div>\n      </li>`;\n  });\n  return markup.join('');\n};\n","import { initializeApp } from 'firebase/app';\nimport { getFirestore, collection, getDocs } from 'firebase/firestore/lite';\nimport { query, limit, startAfter } from 'firebase/firestore/lite';\nimport { latestArticlesItems } from './render-markup.js';\n\nconst elLatestArticlesList = document.querySelector('.latest-articles-list-js');\nconst elLatestArticlesBtn = document.querySelector('.latest-articles-more-js');\nconst elLatestBackdrop = document.querySelector('.latest-articles-backdrop-js');\nconst elLatestAnswer = document.querySelector('.latest-articles-answer-js');\nconst elLatestQuestions = document.querySelector('.latest-articles-questions');\nconst elLatestAnswerDate = document.querySelector('.latest-articles-date');\nconst elLatestAnswerBtn = document.querySelector('.latest-answer-btn-js');\n\nlet startIndex = 0;\nlet count = 3;\nlet nameCollection = 'latest-articles';\nlet totalDate = 6;\n\nconst dateArray = [];\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyCR0kAmNb9OqAWbGZEA3sJGJxmVfHTI72o',\n  authDomain: 'eatly-d7d44.firebaseapp.com',\n  projectId: 'eatly-d7d44',\n  storageBucket: 'eatly-d7d44.appspot.com',\n  messagingSenderId: '804736586438',\n  appId: '1:804736586438:web:a66af0c70aea356c53bdc7',\n  measurementId: 'G-B5LDCNKSKB',\n};\n\nconst app = initializeApp(firebaseConfig);\nconst db = getFirestore(app);\n\nasync function promiseDataFromBeckend(db, collectionName, startIndex, count) {\n  const col = collection(db, collectionName);\n  let mainQuery;\n\n  if (startIndex === 0) {\n    mainQuery = query(col, limit(count));\n  } else {\n    const preQuery = query(col, limit(startIndex));\n    const preSnapshot = await getDocs(preQuery);\n    const lastVisible = preSnapshot.docs[preSnapshot.docs.length - 1];\n    mainQuery = query(col, startAfter(lastVisible), limit(count));\n  }\n\n  const mainSnapshot = await getDocs(mainQuery);\n  const docList = mainSnapshot.docs.map(doc => doc.data());\n  return docList;\n}\n\npromiseDataFromBeckend(db, nameCollection, startIndex, count)\n  .then(array => {\n    elLatestArticlesList.innerHTML = latestArticlesItems(array);\n    dateArray.push(...array);\n  })\n  .catch(error => console.log(error));\n\nelLatestArticlesBtn.addEventListener('click', () => {\n  elLatestArticlesBtn.classList.add('load');\n  elLatestArticlesBtn.disabled = true;\n  startIndex += count;\n\n  promiseDataFromBeckend(db, nameCollection, startIndex, count)\n    .then(array => {\n      elLatestArticlesList.insertAdjacentHTML(\n        'beforeend',\n        latestArticlesItems(array)\n      );\n      dateArray.push(...array);\n\n      elLatestArticlesBtn.classList.remove('load');\n      elLatestArticlesBtn.disabled = false;\n      window.scrollBy({\n        top: 400,\n        behavior: 'smooth',\n      });\n\n      if (totalDate === elLatestArticlesList.childElementCount) {\n        elLatestArticlesBtn.style.display = 'none';\n      }\n    })\n    .catch(error => console.log(error));\n});\n\nelLatestArticlesList.addEventListener('click', e => {\n  if (e.currentTarget === e.target) return;\n\n  const elItem = e.target.closest('.latest-articles-item');\n  const quest = elItem.querySelector('.latest-articles-questions').textContent;\n  const { answer } = dateArray.filter(({ title }) => title === quest)[0];\n\n  elLatestQuestions.textContent = quest;\n  elLatestAnswerDate.textContent = answer;\n  openAnswer();\n});\n\nelLatestAnswerBtn.addEventListener('click', closeAnswer);\nelLatestBackdrop.addEventListener('click', closeAnswer);\ndocument.addEventListener('keydown', event => {\n  if (event.key === 'Escape') closeAnswer();\n});\n\nfunction openAnswer() {\n  elLatestBackdrop.style.display = 'block';\n  elLatestAnswer.style.display = 'flex';\n  document.body.style.overflow = 'hidden';\n\n  setTimeout(() => {\n    elLatestBackdrop.classList.add('latest-backdrop-active');\n    elLatestAnswer.classList.add('latest-answer-active');\n  });\n}\n\nfunction closeAnswer() {\n  elLatestBackdrop.classList.remove('latest-backdrop-active');\n  elLatestAnswer.classList.remove('latest-answer-active');\n\n  setTimeout(() => {\n    elLatestBackdrop.style.display = 'none';\n    elLatestAnswer.style.display = 'none';\n    document.body.style.overflow = 'auto';\n  }, 300);\n}\n"],"names":["latestArticlesItems","dataArray","author","images","publishedAt","title","elLatestArticlesList","elLatestArticlesBtn","elLatestBackdrop","elLatestAnswer","elLatestQuestions","elLatestAnswerDate","elLatestAnswerBtn","startIndex","count","nameCollection","totalDate","dateArray","firebaseConfig","app","initializeApp","db","getFirestore","promiseDataFromBeckend","collectionName","col","collection","mainQuery","query","limit","preQuery","preSnapshot","getDocs","lastVisible","startAfter","doc","array","error","e","quest","answer","openAnswer","closeAnswer","event"],"mappings":"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"}