{"version":3,"file":"commonHelpers10.js","sources":["../src/js/log-account.js"],"sourcesContent":["import $ from 'jquery';\nimport 'jquery-validation';\nimport { receivingDataUser, savingDataUser } from './mockapi';\n\nconst elSignUpEmail = document.querySelector('.sign-up-email');\n\n$(document).ready(function () {\n  $('#sign-in-form').validate({\n    rules: {\n      email: {\n        required: true,\n        email: true,\n      },\n      password: {\n        required: true,\n        minlength: 6,\n      },\n    },\n    messages: {\n      email: {\n        required: 'Please enter your email',\n        email: 'Please enter a valid email address',\n      },\n      password: {\n        required: 'Please enter your password',\n        minlength: 'Your password must be at least 6 characters long',\n      },\n    },\n    highlight: function (element) {\n      $(element).addClass('sign-input-error');\n    },\n    unhighlight: function (element) {\n      $(element).removeClass('sign-input-error');\n    },\n    submitHandler: function (form) {\n      const userEmail = form.elements.email.value;\n      const userPass = form.elements.password.value;\n\n      checkUserInBaseData(userEmail, userPass);\n    },\n  });\n});\n\nfunction checkUserInBaseData(userEmail, userPass) {\n  receivingDataUser()\n    .then(data => {\n      console.log(data);\n      const res = data.find(({ email, password }) => {\n        return email === userEmail && password === userPass;\n      });\n\n      if (!res) {\n        const leLabel =\n          '<label class=\"error\" for=\"email\">Wrong email or password</label>';\n        elSignUpEmail.classList.add('sign-input-error');\n        elSignUpEmail.insertAdjacentHTML('afterend', leLabel);\n\n        elSignUpEmail.addEventListener('input', e => {\n          const elLableErr = e.target.nextElementSibling;\n          elLableErr.style.display = 'none';\n        });\n      } else {\n        savingUserData(userEmail, res.name);\n      }\n    })\n    .catch(error => console.log(error));\n}\n\nfunction savingUserData(userEmail, userName) {\n  const userData = {\n    name: userName,\n    email: userEmail,\n  };\n  localStorage.setItem('userData', JSON.stringify(userData));\n\n  window.location.href = './';\n}\n"],"names":["elSignUpEmail","$","element","form","userEmail","userPass","checkUserInBaseData","receivingDataUser","data","res","email","password","savingUserData","leLabel","e","elLableErr","error","userName","userData"],"mappings":"yNAIA,MAAMA,EAAgB,SAAS,cAAc,gBAAgB,EAE7DC,EAAE,QAAQ,EAAE,MAAM,UAAY,CAC5BA,EAAE,eAAe,EAAE,SAAS,CAC1B,MAAO,CACL,MAAO,CACL,SAAU,GACV,MAAO,EACR,EACD,SAAU,CACR,SAAU,GACV,UAAW,CACZ,CACF,EACD,SAAU,CACR,MAAO,CACL,SAAU,0BACV,MAAO,oCACR,EACD,SAAU,CACR,SAAU,6BACV,UAAW,kDACZ,CACF,EACD,UAAW,SAAUC,EAAS,CAC5BD,EAAEC,CAAO,EAAE,SAAS,kBAAkB,CACvC,EACD,YAAa,SAAUA,EAAS,CAC9BD,EAAEC,CAAO,EAAE,YAAY,kBAAkB,CAC1C,EACD,cAAe,SAAUC,EAAM,CAC7B,MAAMC,EAAYD,EAAK,SAAS,MAAM,MAChCE,EAAWF,EAAK,SAAS,SAAS,MAExCG,EAAoBF,EAAWC,CAAQ,CACxC,CACL,CAAG,CACH,CAAC,EAED,SAASC,EAAoBF,EAAWC,EAAU,CAChDE,EAAmB,EAChB,KAAKC,GAAQ,CACZ,QAAQ,IAAIA,CAAI,EAChB,MAAMC,EAAMD,EAAK,KAAK,CAAC,CAAE,MAAAE,EAAO,SAAAC,KACvBD,IAAUN,GAAaO,IAAaN,CAC5C,EAED,GAAKI,EAWHG,EAAeR,EAAWK,EAAI,IAAI,MAX1B,CACR,MAAMI,EACJ,mEACFb,EAAc,UAAU,IAAI,kBAAkB,EAC9CA,EAAc,mBAAmB,WAAYa,CAAO,EAEpDb,EAAc,iBAAiB,QAASc,GAAK,CAC3C,MAAMC,EAAaD,EAAE,OAAO,mBAC5BC,EAAW,MAAM,QAAU,MACrC,CAAS,CACT,CAGA,CAAK,EACA,MAAMC,GAAS,QAAQ,IAAIA,CAAK,CAAC,CACtC,CAEA,SAASJ,EAAeR,EAAWa,EAAU,CAC3C,MAAMC,EAAW,CACf,KAAMD,EACN,MAAOb,CACX,EACE,aAAa,QAAQ,WAAY,KAAK,UAAUc,CAAQ,CAAC,EAEzD,OAAO,SAAS,KAAO,IACzB"}