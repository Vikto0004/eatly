{"version":3,"file":"commonHelpers7.js","sources":["../src/js/search-filter.js"],"sourcesContent":["// --- вся інформація про продукти --- //\nconst prodoctsInfoAll = {\n  dishes: [],\n  pizza: [],\n  donat: [],\n};\n\nconst elDishes = document.querySelector('.js-dishes');\nconst elPizza = document.querySelector('.js-pizza');\nconst elDonat = document.querySelector('.js-donat');\n\nconst dishesGroupColention = elDishes.nextElementSibling.children;\nconst pizzaGroupColention = elPizza.nextElementSibling.children;\nconst donatGroupColention = elDonat.nextElementSibling.children;\n\nconst nameArray = [];\n\nconst addToGroup = (groupColention, group) => {\n  for (const element of groupColention) {\n    const elName = element.querySelector('.dishes-wrap-title').textContent;\n    const elPrice = parseFloat(\n      element\n        .querySelector('.dishes-container-text')\n        .textContent.replace('$', '')\n    );\n\n    const obj = {};\n\n    obj.elementReference = element.outerHTML;\n    obj.price = elPrice;\n    obj.name = elName;\n    nameArray.push(elName);\n\n    if (element.querySelector('.dishes-wrap-text').textContent === 'Healthy') {\n      obj.popular = false;\n      obj.recomended = true;\n    } else if (\n      element.querySelector('.dishes-wrap-text').textContent === 'Trending'\n    ) {\n      obj.popular = true;\n      obj.recomended = false;\n    } else {\n      obj.popular = false;\n      obj.recomended = false;\n    }\n\n    prodoctsInfoAll[group].push(obj);\n  }\n};\n\naddToGroup(dishesGroupColention, 'dishes');\naddToGroup(pizzaGroupColention, 'pizza');\naddToGroup(donatGroupColention, 'donat');\n\n// ----- search ---- //\n\nconst elRadioSortGroup = document.getElementsByName('sort-group');\nconst elRadioSort = document.getElementsByName('sort');\n\nlet idRadioSortGroup = 'pizza';\nlet idRadioSort = 'recomended';\n\nfor (const element of elRadioSortGroup) {\n  element.addEventListener('input', event => {\n    idRadioSortGroup = event.target.id;\n  });\n}\n\nfor (const element of elRadioSort) {\n  element.addEventListener('input', event => {\n    idRadioSort = event.target.id;\n  });\n}\n\n// --- вибір ціни --- //\n\nconst elPriceSliderInput = document.querySelector('.price-slider-input');\nconst elPriceSliderOutput = document.querySelector('.price-slider-output');\n\nlet price = 0;\n\nconst outputUpdate = event => {\n  elPriceSliderOutput.textContent = event.target.value;\n  if (parseFloat(event.target.value) > 50) {\n    price = parseFloat(event.target.value);\n    elPriceSliderOutput.style.left =\n      2.088 * (-15 + parseFloat(event.target.value)) + 'px';\n  } else {\n    elPriceSliderOutput.style.left =\n      2.088 * (-10 + parseFloat(event.target.value)) + 'px';\n    price = parseFloat(event.target.value);\n  }\n};\n\nelPriceSliderInput.addEventListener('input', outputUpdate);\n\n// ----- вибрати, пошук ---- //\n\nconst elApllyBtn = document.querySelector('.search-aplly-btn');\n\nclass ToSort {\n  constructor(arrayProducts) {\n    this.arrayProducts = arrayProducts;\n  }\n\n  getResultSearch() {\n    const result = [];\n    for (const object of this.arrayProducts) {\n      result.push(object.elementReference);\n    }\n\n    localStorage.setItem('numberResultSearch', `${result.length}`);\n    localStorage.setItem('resultSearch', result.join('')); //збереження результату пошуку\n\n    window.location.href = './result-search.html';\n  }\n\n  popularSort() {\n    this.arrayProducts.sort((a, b) => {\n      if (a.popular) {\n        return -1;\n      } else {\n        return 1;\n      }\n    });\n    this.getResultSearch();\n  }\n\n  recomendedSort() {\n    this.arrayProducts.sort(a => {\n      if (a.recomended) {\n        return -1;\n      } else {\n        return 1;\n      }\n    });\n    this.getResultSearch();\n  }\n\n  lowestPriceSort() {\n    this.arrayProducts.sort((a, b) => {\n      return a.price - b.price;\n    });\n    this.getResultSearch();\n  }\n\n  highestPriceSort() {\n    this.arrayProducts.sort((a, b) => {\n      return b.price - a.price;\n    });\n    this.getResultSearch();\n  }\n}\n\nconst applyFn = () => {\n  if (price === 0) {\n    elPriceSliderOutput.style.color = '#F7433D';\n    elPriceSliderOutput.style.textShadow = '0 0 5px #F8564F';\n\n    setTimeout(function () {\n      elPriceSliderOutput.style.color = '#fff';\n      elPriceSliderOutput.style.textShadow = '';\n    }, 2000);\n  } else {\n    const resultSearchPrice = prodoctsInfoAll[idRadioSortGroup]\n      .map(element => {\n        return element.price <= price ? element : undefined;\n      })\n      .filter(element => element !== undefined);\n\n    const toSort = new ToSort(resultSearchPrice);\n\n    if (idRadioSort === 'popular') {\n      toSort.popularSort();\n    } else if (idRadioSort === 'recomended') {\n      toSort.recomendedSort();\n    } else if (idRadioSort === 'lowest-price') {\n      toSort.lowestPriceSort();\n    } else if (idRadioSort === 'highest-price') {\n      toSort.highestPriceSort();\n    }\n  }\n};\n\nelApllyBtn.addEventListener('click', applyFn);\n\n// ---------------------- пошук за назвою ------------------------- //\n\nconst elSearchInput = document.querySelector('.js-search-input');\nconst elSearchNameContainer = document.querySelector(\n  '.js-search-name-container'\n);\nconst elSearchNameList = document.querySelector('.js-search-name-list');\nconst elSearchInputBtn = document.querySelector('.js-search-input-btn');\n\n//* --- список всіх назв продуктів в масиві --- //\n\nconst newListEl = nameArray\n  .filter((name, index, arr) => {\n    return arr.indexOf(name) === index;\n  })\n  .sort()\n  .reduce((acc, name) => {\n    return (acc += `<li><p>${name}</p></li>`);\n  }, '');\nelSearchNameList.insertAdjacentHTML('beforeend', newListEl);\n\n//* --- відкриття списку --- //\n\nconst handleSearchNameOpen = () => {\n  elSearchNameContainer.style.display = 'block';\n  setTimeout(() => {\n    elSearchNameContainer.style.height = '40vh';\n  }, 0);\n};\nelSearchInput.addEventListener('focus', handleSearchNameOpen);\n\n//* --- закриття списку --- //\n\nconst handleSearchNameClose = () => {\n  elSearchNameContainer.style.height = '0vh';\n  setTimeout(() => {\n    elSearchNameContainer.style.display = 'none';\n  }, 500);\n};\nelSearchInput.addEventListener('blur', handleSearchNameClose);\n\n//* ----- маркіровка і пошук зі списку ----- //\n\nconst handleSearchName = event => {\n  let val = event.target.value.trim().toUpperCase();\n  const elSearchNameArr = document.querySelectorAll(\n    '.js-search-name-list li p'\n  );\n  if (val !== '') {\n    elSearchNameArr.forEach(element => {\n      if (element.textContent.toUpperCase().search(val) == -1) {\n        element.parentNode.style.display = 'none';\n        element.innerHTML = element.innerText;\n\n        elSearchNameContainer.style.height = 'auto';\n        let stylesEl = window.getComputedStyle(elSearchNameContainer);\n        if (parseFloat(stylesEl.height) > window.innerHeight * 0.4) {\n          elSearchNameContainer.style.height = '40vh';\n        }\n      } else {\n        element.parentNode.style.display = 'block';\n        let str = element.textContent;\n        let pos = element.innerText.search(val);\n        let len = val.length;\n        element.innerHTML = `${str.slice(0, pos)}<mark>${str.slice(\n          pos,\n          pos + len\n        )}</mark>${str.slice(pos + len)}`;\n      }\n    });\n  } else {\n    elSearchNameArr.forEach(element => {\n      element.parentNode.style.display = 'block';\n      element.innerHTML = element.innerText;\n      elSearchNameContainer.style.height = '40vh';\n    });\n  }\n};\nelSearchInput.addEventListener('input', handleSearchName);\n\n//* ---- вибір зі списку для пошуку ---- //\n\nconst handleSearchClick = event => {\n  if (event.target === event.currentTarget) return;\n  searchPushResultFn(event.target.textContent);\n};\nelSearchNameList.addEventListener('click', handleSearchClick);\n\n//* -- клік на кнопку search і на enter в input -- //\n\nconst handleSearchClickBtn = event => {\n  event.preventDefault();\n  const inputValue = elSearchInput.value.trim();\n  searchPushResultFn(inputValue);\n};\nelSearchInputBtn.addEventListener('click', handleSearchClickBtn);\n\n//* -- функція для пошуку, збереження і переходу на сторінку result-search -- //\n\nfunction searchPushResultFn(string) {\n  const result = [];\n\n  for (const key in prodoctsInfoAll) {\n    for (const object of prodoctsInfoAll[key]) {\n      if (object.name.toUpperCase().search(string.toUpperCase()) !== -1) {\n        result.push(object.elementReference);\n      }\n    }\n  }\n\n  localStorage.setItem('numberResultSearch', `${result.length}`);\n  localStorage.setItem('resultSearch', result.join('')); //* збереження результату пошуку\n  location.href = 'result-search.html';\n}\n"],"names":["prodoctsInfoAll","elDishes","elPizza","elDonat","dishesGroupColention","pizzaGroupColention","donatGroupColention","nameArray","addToGroup","groupColention","group","element","elName","elPrice","obj","elRadioSortGroup","elRadioSort","idRadioSortGroup","idRadioSort","event","elPriceSliderInput","elPriceSliderOutput","price","outputUpdate","elApllyBtn","ToSort","arrayProducts","result","object","a","b","applyFn","resultSearchPrice","toSort","elSearchInput","elSearchNameContainer","elSearchNameList","elSearchInputBtn","newListEl","name","index","arr","acc","handleSearchNameOpen","handleSearchNameClose","handleSearchName","val","elSearchNameArr","stylesEl","str","pos","len","handleSearchClick","searchPushResultFn","handleSearchClickBtn","inputValue","string","key"],"mappings":"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"}